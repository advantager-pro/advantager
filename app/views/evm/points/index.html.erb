<p id="notice"><%= notice %></p>

<h1>Listing Evm Points</h1>

<br>
<div id="chartContainer"></div>

<script type="text/javascript">
/*
http://morrisjs.github.io/morris.js/index.html
Morris.Area({
   element: 'hero-area',
   data: [
     {period: '2010 Q1', iphone: 2666, ipad: null, itouch: 2647},
     {period: '2010 Q2', iphone: 2778, ipad: 2294, itouch: 2441},
     {period: '2010 Q3', iphone: 4912, ipad: 1969, itouch: 2501},
     {period: '2010 Q4', iphone: 3767, ipad: 3597, itouch: 5689},
     {period: '2011 Q1', iphone: 6810, ipad: 1914, itouch: 2293},
     {period: '2011 Q2', iphone: 5670, ipad: 4293, itouch: 1881},
     {period: '2011 Q3', iphone: 4820, ipad: 3795, itouch: 1588},
     {period: '2011 Q4', iphone: 15073, ipad: 5967, itouch: 5175},
     {period: '2012 Q1', iphone: 10687, ipad: 4460, itouch: 2028},
     {period: '2012 Q2', iphone: 8432, ipad: 5713, itouch: 1791}
   ],
   xkey: 'period', // 'elapsed'
   ykeys: ['iphone', 'ipad', 'itouch'],
   labels: ['iPhone', 'iPad', 'iPod Touch'],
   pointSize: 2,
   hideHover: 'auto'
 });

 // TEST ISSUES
 Morris.Donut({
   element: 'graph',
   data: [
     {value: 70, label: 'foo', formatted: 'at least 70%' },
     {value: 15, label: 'bar', formatted: 'approx. 15%' },
     {value: 10, label: 'baz', formatted: 'approx. 10%' },
     {value: 5, label: 'A really really long label', formatted: 'at most 5%' }
   ],
   formatter: function (x, data) { return data.formatted; }
 });
*/
$(document).ready(function () {
	//Better to construct options first and then pass it as a parameter
  /*
var options =
  	{
  		title:{
  			text: "EVM in time"
  		},
  		axisY: {
  			includeZero:false,
  			suffix: "pts.",
  			title: "Estimated points"
  		},
  		axisX: {
  			// interval:1,
        title: "Time",
  			valueFormatString: "DD MMM"
  		},
  		data: [
  		{
  			type: "spline",
        name: "Planned Value",
        showInLegend: true,
  			dataPoints: <%= emv_points_data(@evm_points, 'planned_value') %>
  		},
      {
  			type: "spline",
        name: "Earned Value",
        showInLegend: true,
  			dataPoints: <%= emv_points_data(@evm_points, 'earned_value') %>
  		},
      {
  			type: "spline",
        name: "Actual Cost",
        showInLegend: true,
  			dataPoints: <%= emv_points_data(@evm_points, 'actual_cost') %>
  		}
  		]
  	}
	$("#chartContainer").CanvasJSChart(options);

});*/

Morris.Line({
   element: 'chartContainer',
   data: <%= data_for_morris(@evm_points, fields: ['day', 'planned_value', 'earned_value', 'actual_cost']) %>,
   xkey: 'day',
   ykeys: ['planned_value', 'earned_value', 'actual_cost'],
   labels: ['Planned Value', 'Earned Value', 'Actual Cost'],
   pointSize: 2,
   hideHover: 'auto'
 });
});
</script>
